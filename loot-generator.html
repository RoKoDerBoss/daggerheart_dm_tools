<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Daggerheart Loot Generator</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background: linear-gradient(135deg, #2a1a5e 0%, #392467 50%, #4a2d7a 100%);
            color: #e0e0e0;
            min-height: 100vh;
            padding: 20px;
            line-height: 1.6;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
        }

        h1 {
            color: #f4d03f;
            text-align: center;
            margin-bottom: 40px;
            font-size: 3rem;
            font-weight: 700;
            letter-spacing: 0.1em;
            text-transform: uppercase;
            text-shadow: 0 2px 4px rgba(0,0,0,0.5);
        }

        .subtitle {
            text-align: center;
            color: #64b5f6;
            font-size: 1.2rem;
            margin-top: -35px;
            margin-bottom: 40px;
            font-style: italic;
        }

        .generators-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-bottom: 30px;
        }

        .generator-section {
            background: #1a1348;
            border: 3px solid #f4d03f;
            border-radius: 16px;
            padding: 30px;
            box-shadow: 0 8px 16px rgba(0,0,0,0.4);
        }

        .generator-title {
            font-size: 1.8rem;
            font-weight: 700;
            margin-bottom: 25px;
            text-align: center;
            color: #f4d03f;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        .controls {
            margin-bottom: 20px;
        }

        .control-section {
            margin-bottom: 15px;
        }

        label {
            display: block;
            margin-bottom: 8px;
            color: #64b5f6;
            font-weight: 500;
            font-size: 0.9rem;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        select, input[type="number"], button {
            width: 100%;
            padding: 12px;
            background: #2a1a5e;
            border: 2px solid #4a2d7a;
            border-radius: 8px;
            color: #e0e0e0;
            font-size: 16px;
            transition: all 0.3s ease;
        }

        select:hover, input[type="number"]:hover {
            border-color: #64b5f6;
        }

        select:focus, input[type="number"]:focus {
            outline: none;
            border-color: #f4d03f;
            box-shadow: 0 0 0 3px rgba(244, 208, 63, 0.2);
        }

        button {
            background: #f4d03f;
            border: none;
            color: #1a1348;
            font-weight: 700;
            cursor: pointer;
            margin-top: 10px;
            padding: 14px 28px;
            text-transform: uppercase;
            letter-spacing: 0.1em;
            transition: all 0.3s ease;
            border-radius: 30px;
        }

        button:hover {
            background: #ffd700;
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(244, 208, 63, 0.4);
        }

        button:active {
            transform: translateY(0);
        }

        .results {
            background: #1a1348;
            border: 2px solid #4a2d7a;
            border-radius: 12px;
            padding: 20px;
            min-height: 300px;
            max-height: 650px;
            overflow-y: auto;
            box-shadow: inset 0 2px 8px rgba(0,0,0,0.3);
        }

        .loot-item {
            background: #2a1a5e;
            border: 2px solid #4a2d7a;
            border-radius: 8px;
            padding: 16px;
            margin-bottom: 15px;
            transition: all 0.3s ease;
        }

        .loot-item:hover {
            border-color: #64b5f6;
            box-shadow: 0 4px 12px rgba(100, 181, 246, 0.2);
            transform: translateY(-1px);
        }

        .loot-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
            flex-wrap: wrap;
            gap: 10px;
        }

        .loot-name {
            font-size: 1.15rem;
            font-weight: 600;
            color: #f4d03f;
        }

        .loot-roll {
            font-size: 0.85rem;
            color: #64b5f6;
            font-style: italic;
        }

        .loot-type {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.75rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        .type-item {
            background: #27ae60;
            color: white;
        }

        .type-consumable {
            background: #e74c3c;
            color: white;
        }

        .loot-rarity {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.75rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            margin-left: 8px;
        }

        .rarity-common {
            background: #7f8c8d;
            color: white;
        }

        .rarity-uncommon {
            background: #27ae60;
            color: white;
        }

        .rarity-rare {
            background: #3498db;
            color: white;
        }

        .rarity-legendary {
            background: #f39c12;
            color: white;
        }

        .loot-description {
            color: #b8b8d0;
            margin-top: 8px;
            line-height: 1.5;
            font-size: 0.95rem;
        }

        .empty-state {
            text-align: center;
            color: #64b5f6;
            padding: 60px 20px;
            font-style: italic;
            font-size: 1.1rem;
        }

        /* Scrollbar styling */
        .results::-webkit-scrollbar {
            width: 10px;
        }

        .results::-webkit-scrollbar-track {
            background: #1a1348;
            border-radius: 5px;
        }

        .results::-webkit-scrollbar-thumb {
            background: #4a2d7a;
            border-radius: 5px;
        }

        .results::-webkit-scrollbar-thumb:hover {
            background: #64b5f6;
        }

        @media (max-width: 968px) {
            .generators-container {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 768px) {
            h1 {
                font-size: 2.5rem;
            }

            .loot-header {
                flex-direction: column;
                align-items: flex-start;
            }

            .generator-section {
                padding: 20px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Daggerheart</h1>
        <p class="subtitle">Loot Generator</p>
        
        <div class="generators-container">
            <!-- Items Generator -->
            <div class="generator-section">
                <h2 class="generator-title">‚öîÔ∏è Items</h2>
                
                <div class="controls">
                    <div class="control-section">
                        <label for="itemRarity">Rarity</label>
                        <select id="itemRarity">
                            <option value="any">Any Rarity</option>
                            <option value="common">Common (1d12 or 2d12)</option>
                            <option value="uncommon">Uncommon (2d12 or 3d12)</option>
                            <option value="rare">Rare (3d12 or 4d12)</option>
                            <option value="legendary">Legendary (4d12 or 5d12)</option>
                        </select>
                    </div>
                    
                    <div class="control-section">
                        <label for="itemQuantity">Quantity</label>
                        <input type="number" id="itemQuantity" min="1" max="20" value="1">
                    </div>
                    
                    <button onclick="generateItems()">Generate Items</button>
                </div>
                
                <div class="results" id="itemResults">
                    <div class="empty-state">No items yet...</div>
                </div>
            </div>

            <!-- Consumables Generator -->
            <div class="generator-section">
                <h2 class="generator-title">üß™ Consumables</h2>
                
                <div class="controls">
                    <div class="control-section">
                        <label for="consumableQuantity">Quantity</label>
                        <input type="number" id="consumableQuantity" min="1" max="20" value="1">
                    </div>
                    
                    <button onclick="generateConsumables()">Generate Consumables</button>
                </div>
                
                <div class="results" id="consumableResults">
                    <div class="empty-state">No consumables yet...</div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Loot data
        const items = [
            {roll: 1, name: "Premium Bedroll", description: "During downtime, you automatically clear a Stress."},
            {roll: 2, name: "Piper Whistle", description: "This handcrafted whistle has a distinctive sound. When you blow this whistle, its piercing tone can be heard within a 1-mile radius."},
            {roll: 3, name: "Charging Quiver", description: "When you succeed on an attack with an arrow stored in this quiver, gain a bonus to the damage roll equal to your current tier."},
            {roll: 4, name: "Alistair's Torch", description: "You can light this magic torch at will. The flame's light fills a much larger space than it should, enough to illuminate a cave bright as day."},
            {roll: 5, name: "Speaking Orbs", description: "This pair of orbs allows any creatures holding them to communicate with each other across any distance."},
            {roll: 6, name: "Manacles", description: "This pair of locking cuffs comes with a key."},
            {roll: 7, name: "Arcane Cloak", description: "A creature with a Spellcast trait wearing this cloak can adjust its color, texture, and size at will."},
            {roll: 8, name: "Woven Net", description: "You can make a Finesse Roll using this net to trap a small creature. A trapped target can break free with a successful Attack Roll (16)."},
            {roll: 9, name: "Fire Jar", description: "You can pour out the strange liquid contents of this jar to instantly produce fire. The contents regenerate when you take a long rest."},
            {roll: 10, name: "Suspended Rod", description: "This flat rod is inscribed with runes. When you activate the rod, it is immediately suspended in place. Until the rod is deactivated, it can't move, doesn't abide by the rules of gravity, and remains in place."},
            {roll: 11, name: "Glamour Stone", description: "Activate this pebble-sized stone to memorize the appearance of someone you can see. Spend a Hope to magically recreate this guise on yourself as an illusion."},
            {roll: 12, name: "Empty Chest", description: "This magical chest appears empty. When you speak a specific trigger word or action and open the chest, you can see the items stored within it."},
            {roll: 13, name: "Companion Case", description: "This case can fit a small animal companion. While the companion is inside, the animal and case are immune to all damage and harmful effects."},
            {roll: 14, name: "Piercing Arrows", description: "Three times per rest when you succeed on an attack with one of these arrows, you can add your Proficiency to the damage roll."},
            {roll: 15, name: "Valorstone", description: "You can attach this stone to armor that doesn't already have a feature. The armor gains the following feature. Resilient: Before you mark your last Armor Slot, roll a d6. On a result of 6, reduce the severity by one threshold without marking an Armor Slot."},
            {roll: 16, name: "Skeleton Key", description: "When you use this key to open a locked door, you gain advantage on the Finesse Roll."},
            {roll: 17, name: "Arcane Prism", description: "Position this prism in a location of your choosing and activate it. All allies within Close range of it gain a +1 bonus to their Spellcast Rolls. While activated, the prism can't be moved. Once the prism is deactivated, it can't be activated again until your next long rest."},
            {roll: 18, name: "Minor Stamina Potion Recipe", description: "As a downtime move, you can use the bone of a creature to craft a Minor Stamina Potion."},
            {roll: 19, name: "Minor Health Potion Recipe", description: "As a downtime move, you can use a vial of blood to craft a Minor Health Potion."},
            {roll: 20, name: "Homing Compasses", description: "These two compasses point toward each other no matter how far apart they are."},
            {roll: 21, name: "Corrector Sprite", description: "This tiny sprite sits in the curve of your ear canal and whispers helpful advice during combat. Once per short rest, you can gain advantage on an attack roll."},
            {roll: 22, name: "Gecko Gloves", description: "You can climb up vertical surfaces and across ceilings."},
            {roll: 23, name: "Lorekeeper", description: "You can store the name and details of up to three hostile creatures inside this book. You gain a +1 bonus to action rolls against those creatures."},
            {roll: 24, name: "Vial of Darksmoke Recipe", description: "As a downtime move, you can mark a Stress to craft a Vial of Darksmoke."},
            {roll: 25, name: "Bloodstone", description: "You can attach this stone to a weapon that doesn't already have a feature. The weapon gains the following feature. Brutal: When you roll the maximum value on a damage die, roll an additional damage die."},
            {roll: 26, name: "Greatstone", description: "You can attach this stone to a weapon that doesn't already have a feature. The weapon gains the following feature. Powerful: On a successful attack, roll an additional damage die and discard the lowest result."},
            {roll: 27, name: "Glider", description: "While falling, you can mark a Stress to deploy this small parachute and glide safely to the ground."},
            {roll: 28, name: "Ring of Silence", description: "Spend a Hope to activate this ring. Your footsteps are silent until your next rest."},
            {roll: 29, name: "Calming Pendant", description: "When you would mark your last Stress, roll a d6. On a result of 5 or higher, don't mark it."},
            {roll: 30, name: "Dual Flask", description: "This flask can hold two different liquids. You can swap between them by flipping a small switch on the flask's side."},
            {roll: 31, name: "Bag of Ficklesand", description: "You can convince this small bag of sand to be much heavier or lighter with a successful Presence Roll (10). Additionally, on a successful Finesse Roll (10), you can blow a bit of sand into a target's face to make them temporarily Vulnerable."},
            {roll: 32, name: "Ring of Resistance", description: "Once per long rest, you can activate this ring after a successful attack against you to halve the damage."},
            {roll: 33, name: "Phoenix Feather", description: "If you have at least one Phoenix Feather on you when you fall unconscious, you gain a +1 bonus to the roll you make to determine whether you gain a scar."},
            {roll: 34, name: "Box of Many Goods", description: "Once per long rest, you can open this small box and roll a d12. On a result of 1‚Äì6, it's empty. On a result of 7‚Äì10, it contains one random common consumable. On a result of 11‚Äì12, it contains two random common consumables."},
            {roll: 35, name: "Airblade Charm", description: "You can attach this charm to a weapon with a Melee range. Three times per rest, you can activate the charm and attack a target within Close range."},
            {roll: 36, name: "Portal Seed", description: "You can plant this seed in the ground to grow a portal in that spot. The portal is ready to use in 24 hours. You can use this portal to travel to any other location where you planted a portal seed. A portal can be destroyed by dealing any amount of magic damage to it."},
            {roll: 37, name: "Paragon's Chain", description: "As a downtime move, you can meditate on an ideal or principle you hold dear and focus your will into this chain. Once per long rest, you can spend a Hope to roll a d20 as your Hope Die for rolls that directly align with that principle."},
            {roll: 38, name: "Elusive Amulet", description: "Once per long rest, you can activate this amulet to become Hidden until you move. While Hidden in this way, you remain unseen even if an adversary moves to where they would normally see you."},
            {roll: 39, name: "Hopekeeper Locket", description: "During a long rest, if you have 6 Hope, you can spend a Hope to imbue this locket with your bountiful resolve. When you have 0 Hope, you can use the locket to immediately gain a Hope. The locket must be re-imbued before it can be used this way again."},
            {roll: 40, name: "Infinite Bag", description: "When you store items in this bag, they are kept in a pocket dimension that never runs out of space. You can retrieve an item at any time."},
            {roll: 41, name: "Stride Relic", description: "You gain a +1 bonus to your Agility. You can only carry one relic."},
            {roll: 42, name: "Bolster Relic", description: "You gain a +1 bonus to your Strength. You can only carry one relic."},
            {roll: 43, name: "Control Relic", description: "You gain a +1 bonus to your Finesse. You can only carry one relic."},
            {roll: 44, name: "Attune Relic", description: "You gain a +1 bonus to your Instinct. You can only carry one relic."},
            {roll: 45, name: "Charm Relic", description: "You gain a +1 bonus to your Presence. You can only carry one relic."},
            {roll: 46, name: "Enlighten Relic", description: "You gain a +1 bonus to your Knowledge. You can only carry one relic."},
            {roll: 47, name: "Honing Relic", description: "You gain a +1 bonus to an Experience of your choice. You can only carry one relic."},
            {roll: 48, name: "Flickerfly Pendant", description: "While you carry this pendant, your weapons with a Melee range that deal physical damage have a gossamer sheen and can attack targets within Very Close range."},
            {roll: 49, name: "Lakestrider Boots", description: "You can walk on the surface of water as if it were soft ground."},
            {roll: 50, name: "Clay Companion", description: "When you sculpt this ball of clay into a clay animal companion, it behaves as that animal. For example, a clay spider can spin clay webs, while a clay bird can fly. The clay companion retains memory and identity across different shapes, but they can adopt new mannerisms with each form."},
            {roll: 51, name: "Mythic Dust Recipe", description: "As a downtime move, you can use a handful of fine gold dust to craft Mythic Dust."},
            {roll: 52, name: "Shard of Memory", description: "Once per long rest, you can spend 2 Hope to recall a domain card from your vault instead of paying its Recall Cost."},
            {roll: 53, name: "Gem of Alacrity", description: "You can attach this gem to a weapon, allowing you to use your Agility when making an attack with that weapon."},
            {roll: 54, name: "Gem of Might", description: "You can attach this gem to a weapon, allowing you to use your Strength when making an attack with that weapon."},
            {roll: 55, name: "Gem of Precision", description: "You can attach this gem to a weapon, allowing you to use your Finesse when making an attack with that weapon."},
            {roll: 56, name: "Gem of Insight", description: "You can attach this gem to a weapon, allowing you to use your Instinct when making an attack with that weapon."},
            {roll: 57, name: "Gem of Audacity", description: "You can attach this gem to a weapon, allowing you to use your Presence when making an attack with that weapon."},
            {roll: 58, name: "Gem of Sagacity", description: "You can attach this gem to a weapon, allowing you to use your Knowledge when making an attack with that weapon."},
            {roll: 59, name: "Ring of Unbreakable Resolve", description: "Once per session, when the GM spends a Fear, you can spend 4 Hope to cancel the effects of that spent Fear."},
            {roll: 60, name: "Belt of Unity", description: "Once per session, you can spend 5 Hope to lead a Tag Team Roll with three PCs instead of two."}
        ];

        const consumables = [
            {roll: 1, name: "Stride Potion", description: "You gain a +1 bonus to your next Agility Roll."},
            {roll: 2, name: "Bolster Potion", description: "You gain a +1 bonus to your next Strength Roll."},
            {roll: 3, name: "Control Potion", description: "You gain a +1 bonus to your next Finesse Roll."},
            {roll: 4, name: "Attune Potion", description: "You gain a +1 bonus to your next Instinct Roll."},
            {roll: 5, name: "Charm Potion", description: "You gain a +1 bonus to your next Presence Roll."},
            {roll: 6, name: "Enlighten Potion", description: "You gain a +1 bonus to your next Knowledge Roll."},
            {roll: 7, name: "Minor Health Potion", description: "Clear 1d4 HP."},
            {roll: 8, name: "Minor Stamina Potion", description: "Clear 1d4 Stress."},
            {roll: 9, name: "Grindletooth Venom", description: "You can apply this venom to a weapon that deals physical damage to add a d6 to your next damage roll with that weapon."},
            {roll: 10, name: "Varik Leaves", description: "You can eat these paired leaves to immediately gain 2 Hope."},
            {roll: 11, name: "Vial of Moondrip", description: "When you drink the contents of this vial, you can see in total darkness until your next rest."},
            {roll: 12, name: "Unstable Arcane Shard", description: "You can make a Finesse Roll to throw this shard at a group of adversaries within Far range. Targets you succeed against take 1d20 magic damage."},
            {roll: 13, name: "Potion of Stability", description: "You can drink this potion to choose one additional downtime move."},
            {roll: 14, name: "Improved Grindletooth Venom", description: "You can apply this venom to a weapon that deals physical damage to add a d8 to your next damage roll with that weapon."},
            {roll: 15, name: "Morphing Clay", description: "You can spend a Hope to use this clay, altering your face enough to make you unrecognizable until your next rest."},
            {roll: 16, name: "Vial of Darksmoke", description: "When an adversary attacks you, use this vial and roll a number of d6s equal to your Agility. Add the highest result to your Evasion against the attack."},
            {roll: 17, name: "Jumping Root", description: "Eat this root to leap up to Far range once without needing to roll."},
            {roll: 18, name: "Snap Powder", description: "Mark a Stress and clear a HP."},
            {roll: 19, name: "Health Potion", description: "Clear 1d4+1 HP."},
            {roll: 20, name: "Stamina Potion", description: "Clear 1d4+1 Stress."},
            {roll: 21, name: "Armor Stitcher", description: "You can use this stitcher to spend any number of Hope and clear that many Armor Slots."},
            {roll: 22, name: "Gill Salve", description: "You can apply this salve to your neck to breathe underwater for a number of minutes equal to your level."},
            {roll: 23, name: "Replication Parchment", description: "By touching this piece of parchment to another, you can perfectly copy the second parchment's contents. Once used, this parchment becomes mundane paper."},
            {roll: 24, name: "Improved Arcane Shard", description: "You can make a Finesse Roll to throw this shard at a group of adversaries within Far range. Targets you succeed against take 2d20 magic damage."},
            {roll: 25, name: "Major Stride Potion", description: "You gain a +1 bonus to your Agility until your next rest."},
            {roll: 26, name: "Major Bolster Potion", description: "You gain a +1 bonus to your Strength until your next rest."},
            {roll: 27, name: "Major Control Potion", description: "You gain a +1 bonus to your Finesse until your next rest."},
            {roll: 28, name: "Major Attune Potion", description: "You gain a +1 bonus to your Instinct until your next rest."},
            {roll: 29, name: "Major Charm Potion", description: "You gain a +1 bonus to your Presence until your next rest."},
            {roll: 30, name: "Major Enlighten Potion", description: "You gain a +1 bonus to your Knowledge until your next rest."},
            {roll: 31, name: "Blood of the Yorgi", description: "You can drink this blood to disappear from where you are and immediately reappear at a point you can see within Very Far range."},
            {roll: 32, name: "Homet's Secret Potion", description: "After drinking this potion, the next successful attack you make critically succeeds."},
            {roll: 33, name: "Redthorn Saliva", description: "You can apply this saliva to a weapon that deals physical damage to add a d12 to your next damage roll with that weapon."},
            {roll: 34, name: "Channelstone", description: "You can use this stone to take a spell or grimoire from your vault, use it once, and return it to your vault."},
            {roll: 35, name: "Mythic Dust", description: "You can apply this dust to a weapon that deals magic damage to add a d12 to your next damage roll with that weapon."},
            {roll: 36, name: "Acidpaste", description: "This paste eats away walls and other surfaces in bright flashes."},
            {roll: 37, name: "Hopehold Flare", description: "When you use this flare, allies within Close range roll a d6 when they spend a Hope. On a result of 6, they gain the effect of that Hope without spending it. The flare lasts until the end of the scene."},
            {roll: 38, name: "Major Arcane Shard", description: "You can make a Finesse Roll to throw this shard at a group of adversaries within Far range. Targets you succeed against take 4d20 magic damage."},
            {roll: 39, name: "Featherbone", description: "You can use this bone to control your falling speed for a number of minutes equal to your level."},
            {roll: 40, name: "Circle of the Void", description: "Mark a Stress to create a void that extends up to Far range. No magic can be cast inside the void, and creatures within the void are immune to magic damage."},
            {roll: 41, name: "Sun Tree Sap", description: "Consume this sap to roll a d6. On a result of 5‚Äì6, clear 2 HP. On a result of 2‚Äì4, clear 3 Stress. On a result of 1, see through the veil of death and return changed, gaining one scar."},
            {roll: 42, name: "Dripfang Poison", description: "A creature who consumes this poison takes 8d10 direct magic damage."},
            {roll: 43, name: "Major Health Potion", description: "Clear 1d4+2 HP."},
            {roll: 44, name: "Major Stamina Potion", description: "Clear 1d4+2 Stress."},
            {roll: 45, name: "Ogre Musk", description: "You can use this musk to prevent anyone from tracking you by mundane or magical means until your next rest."},
            {roll: 46, name: "Wingsprout", description: "You gain magic wings that allow you to fly for a number of minutes equal to your level."},
            {roll: 47, name: "Jar of Lost Voices", description: "You can open this jar to release a deafening echo of voices for a number of minutes equal to your Instinct. Creatures within Far range unprepared for the sound take 6d8 magic damage."},
            {roll: 48, name: "Dragonbloom Tea", description: "You can drink this tea to unleash a fiery breath attack. Make an Instinct Roll against all adversaries in front of you within Close range. Targets you succeed against take d20 physical damage using your Proficiency."},
            {roll: 49, name: "Bridge Seed", description: "Thick vines grow from your location to a point of your choice within Far range, allowing you to climb up or across them. The vines dissipate on your next short rest."},
            {roll: 50, name: "Sleeping Sap", description: "You can drink this potion to fall asleep for a full night's rest. You clear all Stress upon waking."},
            {roll: 51, name: "Feast of Xuria", description: "You can eat this meal to clear all HP and Stress and gain 1d4 Hope."},
            {roll: 52, name: "Bonding Honey", description: "This honey can be used to glue two objects together permanently."},
            {roll: 53, name: "Shrinking Potion", description: "You can drink this potion to halve your size until you choose to drop this form or your next rest. While in this form, you have a +2 bonus to Agility and a ‚àí1 penalty to your Proficiency."},
            {roll: 54, name: "Growing Potion", description: "You can drink this potion to double your size until you choose to drop this form or your next rest. While in this form, you have a +2 bonus to Strength and a +1 bonus to your Proficiency."},
            {roll: 55, name: "Knowledge Stone", description: "If you die while holding this stone, an ally can take a card from your loadout to place in their loadout or vault. After they take this knowledge, the stone crumbles."},
            {roll: 56, name: "Sweet Moss", description: "You can consume this moss during a rest to clear 1d4 HP or 1d4 Stress."},
            {roll: 57, name: "Blinding Orb", description: "You can activate this orb to create a flash of bright light. All targets within Close range become Vulnerable until they mark HP."},
            {roll: 58, name: "Death Tea", description: "After you drink this tea, you instantly kill your target when you critically succeed on an attack. If you don't critically succeed on an attack before your next long rest, you die."},
            {roll: 59, name: "Mirror of Marigold", description: "When you take damage, you can spend a Hope to negate that damage, after which the mirror shatters."},
            {roll: 60, name: "Stardrop", description: "You can use this stardrop to summon a hailstorm of comets that deals 8d20 physical damage to all targets within Very Far range."}
        ];

        // Stats tracking
        let itemStats = {
            total: 0
        };

        let consumableStats = {
            total: 0
        };

        function rollDice(count) {
            let total = 0;
            let rolls = [];
            for (let i = 0; i < count; i++) {
                const roll = Math.floor(Math.random() * 12) + 1;
                rolls.push(roll);
                total += roll;
            }
            return { total, rolls };
        }

        function getRarityFromRoll(roll) {
            if (roll <= 12) return 'common';
            if (roll <= 24) return 'uncommon';
            if (roll <= 36) return 'rare';
            return 'legendary';
        }

        function getRollRangeForRarity(rarity) {
            switch (rarity) {
                case 'common': return { min: 1, max: 12 };
                case 'uncommon': return { min: 13, max: 24 };
                case 'rare': return { min: 25, max: 36 };
                case 'legendary': return { min: 37, max: 48 };
                default: return { min: 1, max: 60 };
            }
        }

        function getDiceCountForRarity(rarity) {
            switch (rarity) {
                case 'common': return Math.random() < 0.5 ? 1 : 2;
                case 'uncommon': return Math.random() < 0.5 ? 2 : 3;
                case 'rare': return Math.random() < 0.5 ? 3 : 4;
                case 'legendary': return Math.random() < 0.5 ? 4 : 5;
                default: return Math.floor(Math.random() * 5) + 1;
            }
        }

        function generateSingleItem(rarity) {
            // Determine dice count and roll
            let diceCount = getDiceCountForRarity(rarity);
            let rollResult = rollDice(diceCount);
            
            // For "any" rarity, we need to check if the roll is valid
            if (rarity === 'any') {
                // Roll can be 1-60 for any rarity
                if (rollResult.total > 60) {
                    rollResult.total = 60;
                }
            } else {
                // For specific rarities, ensure the roll is within the correct range
                const range = getRollRangeForRarity(rarity);
                if (rollResult.total < range.min) {
                    rollResult.total = range.min;
                } else if (rollResult.total > range.max) {
                    rollResult.total = range.max;
                }
            }

            // Find the loot item
            let loot = items.find(item => item.roll === rollResult.total);
            
            // If not found (shouldn't happen), get the closest one
            if (!loot) {
                loot = items[Math.min(rollResult.total - 1, items.length - 1)];
            }

            // Update stats
            itemStats.total++;

            return {
                ...loot,
                type: 'item',
                rarity: getRarityFromRoll(rollResult.total),
                diceRoll: rollResult
            };
        }

        function generateSingleConsumable() {
            // For consumables, we'll use a simple 1d60 roll
            let rollResult = rollDice(Math.floor(Math.random() * 5) + 1);
            
            // Ensure roll is within 1-60
            if (rollResult.total > 60) {
                rollResult.total = 60;
            }

            // Find the consumable
            let loot = consumables.find(item => item.roll === rollResult.total);
            
            // If not found (shouldn't happen), get the closest one
            if (!loot) {
                loot = consumables[Math.min(rollResult.total - 1, consumables.length - 1)];
            }

            // Update stats
            consumableStats.total++;

            return {
                ...loot,
                type: 'consumable',
                rarity: getRarityFromRoll(rollResult.total),
                diceRoll: rollResult
            };
        }

        function displayItems(lootItems) {
            const resultsDiv = document.getElementById('itemResults');
            resultsDiv.innerHTML = '';

            if (lootItems.length === 0) {
                resultsDiv.innerHTML = '<div class="empty-state">No items yet...</div>';
                return;
            }

            lootItems.forEach(loot => {
                const lootDiv = document.createElement('div');
                lootDiv.className = 'loot-item';
                
                const diceString = loot.diceRoll.rolls.join(' + ') + ' = ' + loot.diceRoll.total;
                
                lootDiv.innerHTML = `
                    <div class="loot-header">
                        <div>
                            <span class="loot-name">${loot.name}</span>
                            <span class="loot-rarity rarity-${loot.rarity}">${loot.rarity}</span>
                        </div>
                        <span class="loot-roll">${diceString}</span>
                    </div>
                    <div class="loot-description">${loot.description}</div>
                `;
                
                resultsDiv.appendChild(lootDiv);
            });
        }

        function displayConsumables(lootItems) {
            const resultsDiv = document.getElementById('consumableResults');
            resultsDiv.innerHTML = '';

            if (lootItems.length === 0) {
                resultsDiv.innerHTML = '<div class="empty-state">No consumables yet...</div>';
                return;
            }

            lootItems.forEach(loot => {
                const lootDiv = document.createElement('div');
                lootDiv.className = 'loot-item';
                
                const diceString = loot.diceRoll.rolls.join(' + ') + ' = ' + loot.diceRoll.total;
                
                lootDiv.innerHTML = `
                    <div class="loot-header">
                        <div>
                            <span class="loot-name">${loot.name}</span>
                            <span class="loot-rarity rarity-${loot.rarity}">${loot.rarity}</span>
                        </div>
                        <span class="loot-roll">${diceString}</span>
                    </div>
                    <div class="loot-description">${loot.description}</div>
                `;
                
                resultsDiv.appendChild(lootDiv);
            });
        }

        function generateItems() {
            const rarity = document.getElementById('itemRarity').value;
            const quantity = parseInt(document.getElementById('itemQuantity').value);

            const lootItems = [];
            for (let i = 0; i < quantity; i++) {
                lootItems.push(generateSingleItem(rarity));
            }

            displayItems(lootItems);
        }

        function generateConsumables() {
            const quantity = parseInt(document.getElementById('consumableQuantity').value);

            const lootItems = [];
            for (let i = 0; i < quantity; i++) {
                lootItems.push(generateSingleConsumable());
            }

            displayConsumables(lootItems);
        }

        // Initialize on page load
        document.addEventListener('DOMContentLoaded', function() {
            // Set default values
            document.getElementById('itemRarity').value = 'any';
            document.getElementById('itemQuantity').value = '1';
            document.getElementById('consumableQuantity').value = '1';
        });
    </script>
</body>
</html>